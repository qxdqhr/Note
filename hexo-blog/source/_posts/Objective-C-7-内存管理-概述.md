---
title: Objective-C-7-内存管理-概述
date: 2022-07-07 10:47:08
categories: Objective-C
tags:
---

# 内存管理是什么意思?

- 内存的作用:存储数据 ,也就是代码中的变量

- 当数据(变量/对象)不再被使用的时候,占用的内存空间如何被释放

# Objective-C 中 内存管理 解决了什么问题?

- 防止野指针的生成 （野指针：指向变量的指针还存在，但是所指向的内存已经被释放，此时的指针就变成了野指针 -- 没有指向 *“ 内容 ”* 的指针）
- 防止出现内存泄漏 （内存泄漏：指向内存空间的指针已经被释放，但是该指针指向的内存空间还在内存中存在（被占用） -- 没有 *“ 地址 ”* 的内存）
- 合理使用内存，防止有限内存的大量消耗

# 内存中的五大区域 

-  栈、BSS段、数据段、代码段存储在它们中的数据的回收由系统自动完成
- 分配在堆区中的OC对象,系统不会自动回收,直到程序结束的时候才会被回收.

   ## 栈:

- 局部变量. 当局部变量的作用域被执行完毕之后,这个局部变量就会被系统立即回收.

   ## 堆:

- OC对象,使用C函数申请的空间

 ## BSS段:

- 未初始化的全局变量、静态变量. 一旦初始化就回收 并转存到数据段之中.

  ## 数据段:

-  已经初始化的全局变量、静态变量. 直到程序结束的时候才会被回收.

   ## 代码段:

-  代码. 程序结束的时候,系统会自动回收存储在代码段中的数据.

#    iPhone 内存机制是怎样的?(旧)

- 40M 警告
- 45M 警告
- 120M 闪退.

# 内存管理的范围:

- 只需管理存储在堆中的OC对象的回收
- 其他区域中的数据由系统自动管理.

# 对象应该什么时候被回收?

- 对象被使用时,不能回收
- 对象未被使用时,才可回收
