#类与对象应用1:建立一个可以移动的小人

## 建立人的类
### 属性:
- 私有成员:
  - 人所在的x坐标   int x ;
  - 人所在的y坐标   int y ;
  - 人要行动的方向  int FX ;
  - 人向左移动的图片句柄 HBITMAP m_hBmpLeft;
  - 人向右移动的图片句柄 HBITMAP m_hBmpRight;
- 公有成员:
  - 构造函数:初始化人物
    - 默认人的位置(250,250)
    - 默认方向为右
19.44
如果不加,无法确定此函数是自己写的还是调用的库函数,建议写上



20.09
在函数中也要创建一个兼容性DC
HDC hMemDC
判断贴哪一张图:
    根据方向变量的值,向DC中选入对应图片
拷贝位图至画板中:
::BitBlt(hdc,拷贝位置x,拷贝位置y,粘贴位置x,粘贴位置y,已有画板,0,0,SRCCOPY);
在资源视图中确定图片的大小


句柄代表着一个东西,图片在程序中使用句柄表示
与文件类似,在程序中应该打开文件,并用文件指针访问文件


在一个兼容性画图板上放置一张图片
需要将兼容性画板拷贝复制粘贴到主画板上

# 人物移动的窗口小程序(2)
定义人物类后,创建人物对象;
此程序中仅有一个人,定义一个全局对象
当想要令人物移动时,在键盘中输入对应按键相当于传入消息;所以要在键盘消息的代码处调用人物移动函数;

创建对象后,当接收到重绘消息时调用任务的初始化函数(加载人物图片)
## 消息回调函数
消息处理函数中根据传入消息种类的不同,分为以下几种消息:
### WM_CREATE(创建消息)
当窗口创建时由CreateWindow发送,回调函数接收到此消息时,可以调用对应初始化函数;
人物要在窗口建立后完成初始化,在接收到此消息后调用类中人物初始化函数;
### WM_PAINT(重绘消息)
完成一些贴图显示工作:创建画板,绘制画板,显示画板
#### 需要一个绘图结构体:
    PAINTSTRUCT ps={0};
#### 需要一个HDC,并开始绘图:
    HDC hdc=::BeginPaint(窗口句柄,绘图结构体地址);
#### 调用人物类中任务显示功能:
    ps.Show(hdc);
#### 结束绘制:
    ::EndPaint(窗口句柄,绘图结构体地址);
#### 注意:
此处BeginPaint函数仅能用在WM_PAINT消息中;
并且BeginPaint函数仅当窗口(客户区)存在无效区域时才会重绘窗口;
当游戏运行时,窗口一直处于活动状态;
#### 窗口的无效区域:
  - 多窗口显示时,A窗口被B窗口所遮盖,A中被遮盖的部分被称为窗口的无效区域;
  - 当A窗口不再被遮盖时,发送重绘消息,将缺失部分的窗口重新显示出来;
#### GetDC函数:
无论窗口是否有无效区域,调用时直接发送重绘消息;
已粘贴上的图片无法被擦除,需要用背景图粘贴覆盖掉;
### WM_KETDOWN(键盘消息):人物移动+重绘
#### 人物移动
- 键盘按下的键作为参数存储在wParam参数中;
- 可直接在此处调用人物移动函数:

      ps.Move(Param);
#### 如何人物重绘
- 当**按下键盘**时,程序**接受键盘消息**调用人物移动函数,并且**改变了人物坐标**;
- 但改变后的人物图片位置并未被重绘出来,仅当改变窗口大小时,才可以显示新的人物位置;
- (改变窗口大小时系统发送了重绘消息)
- 由于BeginPaint函数仅当客户区存在无效区域时重绘窗口,需要在改变坐标后,将窗口的客户区置为无效;
- 这样才会发送重绘消息,引起重绘;
##### 设定矩形:
四个长整型成员,分别代表矩形的左上与右下的点坐标

      RECT rect ={0,0,500,500};
##### 窗口无效化:
所使用的函数:

      InvalidateRect(
            窗口句柄,
            矩形结构体地址(那部分区域是无效窗口),
            是否要擦除当前矩形框内容(是:会擦除,不是:不擦除)
            );
### 注意:
- 人物重绘时,假设使用的重回函数是GetDC时,直接将重绘消息部分代码复制于此处即可;
- 消除人物放置于窗口中会显示贴图自带的白色背景:
  - 为人物选择两张背景颜色为黑,白的图
  - 在任务类中的任务显示函数中 的BitBlt函数中决定粘贴方式:SRCAND
  - 如果仅有一张白色背景图片,整张图片会变暗,所以需要两张图片;
- 每一个case中代码最好用{}括起来:用于明显区分作用域;





## 炮弹类的思路:
- 炮弹,人物的方向给炮弹,炮弹依照此方向移动