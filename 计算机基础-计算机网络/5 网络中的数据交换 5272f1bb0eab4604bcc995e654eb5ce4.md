# 5.网络中的数据交换

## 数据交换流程：

### 数据交换时最初产生的问题 : **n2链路问题**

- 多个主机互相连接时产生链路数较多，浪费资源;
    - n个主机两两连接,会形成n(n-1)/2条链路
- 解决方法：
    - **引入交换设备**,使多个主机与一个交换设备相连接,同时,交换机之间在相互连结; ### 何为数据交换
- **端口之间**的动态转接过程中的数据交换;
- **主机间**资源的动态传输过程中的数据交换; ### 数据交换使用多路复用技术： #### 多路复用技术的概念:
    - 简称“复用”,多种通信共享同一信道,指在一根网线上走多种信号（电话/网络）
    - 发送端通过复用器将多种信号传入共享信道; #### 多路复用技术的运行流程:
    - 接收端通过**分用器**将信号分解成**多种适配于接收设备**的信号;
    - 多路复用将**链路/网络资源**划分成资源片供各路使用，每路**独占**分配到的资源进行通信; #### 多种多路复用方法： ##### 频分多路复用FMD：根据**信号频率**分网线
    - 根据信号**不同频率**将信号分配给不同的通路
    - 每个信号在进入通路后根据**频率的不同**各自占有**不同的频率信道**,此时各个信号的不同频率被称为频率带宽(与传输速率指明的带宽不同);
    - 并且，在分配资源后，被占用的频率带宽**始终被此信号所占用**。 ##### 时分多路复用TDM：每隔一段时间轮换传输的信号
    - 将**一段时间**划为**几段等长的时分复用帧**(TDM帧)，**每个用户**在所有TDM帧之中**占有固定序号的时间间隔**
    - 每个用户所使用的时间间隔都是**周期性出现**(周期为TDM的长度)
    - 时分复用传输中的所有用户是在**不同时间**占用**相同的频带宽度** ##### 波分多路复用WDM；信号波长分网线
    - 即**光的频分复用**，不同波长的光各自占有通路中的一部分 ##### 码分多路复用CDM：
    - CDM是CDMA的由来，广泛应用于无线链路共享; ###### CDM的工作方式
1. 编码
    - CDM为每个用户分配一个唯一的 m bit(位) 码片序列，(其中0用-1表示，1用+1表示);
    - 各个用户使用**相同频率载波**，但在发送数据时**必须使用被分配到的码片序列**对带发送数据进行编码
    - 编码信号=原始数据*码片序列
    - 用户发送二进制数据时:
        - **发送的原始数据为0时**，将其**用-1表示**，所得编码即是**码片序列的反码**
            - 码片序列的反码指:
                - 码片序列得二进制表示与0进行交运算
                - 码片序列得表示值与-1相乘后在用二进制表示
        - **发送的原始数据为1时**，将其**用+1表示**，所得编码即是**码片序列的不变形式**(计算方法与上述相同)
2. 区分编码:
    - 保证**不同用户码片序列相互正交**，即**下标对应项相乘之和为0**
3. 解码：
    - 原始数据=码片序列与编码信号的内积 ### 数据交换的类型：(电路交换,报文交换,分组交换) #### 电路交换：典型例子：电话网络 ##### 电路交换的三个阶段：
    - 建立连接(拨号,确定连接线路)
    - 通信(通话)
    - 释放连接(挂断,断开连接的线路) ##### 电路交换的特点：资源独占 ##### 电路交换中遇到的问题:
- 两电话通信时所占用的电路资源,不能被第三方使用
- 解决方法:采用**多路复用技术** #### 报文交换:串行传输 ##### 报文交换特点:仅发送整体数据报文;

### 分组交换:并行传输,以分组形式进行数据传输

### 分组交换特点:拆包+标头+重组

### 拆包:

- 将1个整体数据报文拆分成多个小的数据包 ###### 标头:
- 在每个小数据包前加上头部信息(控制信息，地址信息) ###### 重组:
- 接收方在接收到分组后的小数据包时,会对报文重组，尽管这样会产生额外开销，但有效的节约传输时间 ###### 分组交换共享链路的方式：统计多路复用
- AB在同时发送数据时,AB文件各自占用线路的带宽**根据其各自的大小决定**且**按照统计学分配**（分组多的文件占有带宽多，分组少的文件占有带宽少）
- 统计多路复用的特点：**按需共享链路** ###### 与报文交换的异同点:
- 不同点:数据传输时**一个数据包大小**的区别
- 相同点:都采用**存储 - 转发**的交换方式 #### 有关报文交换与分组交换的计算: ##### 分组交换：
- 传输延迟 =
    - 整个报文通过带宽相同的链路延迟: $\frac{整个报文长度 : M(bits)}{链路带宽 : R (bits/sec)}$(sec) + (跳步数:h - 1)* $\frac{每个分组的长度 :L (bits)}{传输速率:R (bits/sec)}$(sec);
- 跳步数=路由器数+1; ##### 报文交换：
- 传输延迟 = 跳步数:h * $\frac{整个报文长度 : M(bits)}{链路带宽 : R (bits/sec)}$(sec) ##### 传输一个文件,分组交换总时长短于报文交换的总时长 #### 分组交换与电路交换比较 ##### 分组交换
    - 适用于突发数据传输网络
    - 允许更多的用户同时使用网络
    - 使网络资源共享更充分
    - 建立简单,无需呼叫或建立
    - 可能产生拥塞(可使用协议实现可靠数据传输和拥塞控制) ##### 电路交换
    - 能够极稳定的传输数据
    - 建立通信时需要较多复杂操作
    - 独占网络资源,不会产生网络拥塞情况